# Метрики персонажа и механики движения

При проектировании игрового персонажа и его взаимодействия с игровым миром необходимо учитывать множество количественных и качественных параметров. Эта лекция посвящена основным метрикам персонажа, его движению, механикам взаимодействия с окружением и системам камеры, которые напрямую влияют на игровой опыт.

## Основные метрики персонажа

Метрики персонажа определяют параметры, в рамках которых он функционирует в игровом мире. При создании персонажа критически важно установить его базовые физические характеристики: рост и ширину. Эти параметры становятся основой для проектирования всего игрового пространства и механик.

Все элементы уровня должны соотноситься с размерами персонажа. Проходы должны быть шире, чем персонаж, препятствия должны соответствовать его возможностям преодоления, а платформы — его дальности прыжка. Установление единого языка для дизайнеров и аниматоров обеспечивает согласованность игрового мира.

## Скорость передвижения

### Скорость ходьбы

Скорость ходьбы измеряется в единицах, которые персонаж преодолевает за секунду. Реалистичная скорость для человеческого персонажа составляет примерно 1.4 м/сек, что соответствует отношению скорости к росту 0.8 с⁻¹. Важно определить не только абсолютную скорость, но и то, как она ощущается игроком в контексте игрового мира.

### Скорость бега

Скорость бега обычно устанавливается в 1.5-2 раза выше скорости ходьбы. В динамичных играх этот показатель может быть еще выше. Скорость ускорения (время достижения максимальной скорости) критически важна для ощущения управления: короткое окно ускорения создает отзывчивость, характерную для Super Meat Boy или Celeste, тогда как более длительное ускорение подходит для размеренного геймплея Mario или Sonic.

## Механика прыжков

Прыжок — основополагающая механика платформеров и многих других жанров. При проектировании прыжка необходимо определить несколько ключевых параметров:​

Дальность прыжка должна быть больше, чем шаг персонажа, но меньше, чем дистанция, преодолеваемая бегом за то же время. Высота прыжка традиционно составляет около полутора ростов персонажа, хотя это значение варьируется в зависимости от геймплея.

Современные прыжковые механики включают несколько важных элементов:​

- **Переменная высота прыжка:** удержание кнопки прыжка позволяет прыгнуть выше, отпускание — ниже, что достигается изменением гравитации после отпускания кнопки
- **Минимальная и максимальная высота:** определяют диапазон возможностей игрока
- **Скорость подъема и спуска:** подъем должен быть очень быстрым, спуск может быть медленнее или равен подъему в зависимости от темпа игры
- **Контроль траектории:** возможность изменять направление полета в воздухе
- **Coyote time:** короткий период после схода с платформы, когда игрок еще может прыгнуть
- **Jump buffer:** система запоминает нажатие кнопки прыжка перед приземлением

При нажатии кнопки прыжка должен быть немедленный отклик. Анимация взлета и приземления должна быть короткой, чтобы не мешать геймплею. Двойной прыжок, если он присутствует, должен активироваться в самой высокой точке первого прыжка и обеспечивать дополнительную высоту примерно вдвое больше обычного прыжка.​​

Типы прыжков:

- **Одинарный прыжок:** стандартный прыжок с земли
- **Двойной прыжок:** второй прыжок в воздухе
- **Тройной прыжок:** требует отскока от предмета или поверхности
- **Автопрыжок:** персонаж прыгает автоматически, игрок не совершает действий
- **Прыжок с отскоком:** от стен или других объектов

Для платформеров критически важно четкое визуальное обозначение платформ. Безопасная зона после прыжка позволяет игроку приземлиться чуть за краем платформы. Узкие зоны приземления следует использовать только на финальных уровнях, когда игрок уже освоил механики.

## Падение и приземление

Чем быстрее темп игры, тем быстрее должно быть время падения. Не следует гнаться за реалистичной физикой — важнее создать правильное ощущение. На этапе прототипа необходимо рассчитать все силы, влияющие на персонажа, и определить:​

- Есть ли наказание за падение (урон от высоты)?
- Существуют ли предметы, которые ускоряют или замедляют падение?
- Может ли игрок контролировать падение?

При приземлении персонаж не должен двигаться — это создает ощущение веса и контроля. С первого уровня игроку должно быть ясно, может ли персонаж прыгать с высоты без последствий.

## Рывок (Dash)

Рывок используется для быстрого перемещения на короткое расстояние. Это мощная механика, которая находит применение в:​​

- **Головоломках:** для преодоления больших промежутков
- **Боевой системе:** для нанесения дополнительного урона или оглушения
- **Навигации:** для быстрого уклонения от опасностей

При проектировании рывка важно установить:​

- **Направление:** определяется вводом игрока в момент активации
- **Дистанцию:** обычно рассчитывается как скорость × продолжительность
- **Время восстановления (cooldown):** чтобы предотвратить злоупотребление
- **Ограничения:** часто рывок можно использовать только на земле или один раз в воздухе

Игроки не должны постоянно двигаться рывками — это должна быть тактическая возможность, а не основной способ передвижения.

## Медленное движение и стелс

Медленная ходьба используется для стелса или напряженных моментов и должна выглядеть скрытно. В стелс-играх обычно реализованы несколько режимов движения: бег, ходьба, приседание и ползание. Каждый режим изменяет не только скорость, но и уровень шума, который производит персонаж.​

Важные принципы стелса:

- Не следует ограничивать стелс по времени — это создает ненужное давление​
- Стелс не всегда должен быть медленным — можно создавать динамичные стелс-механики
- Управление скоростью может быть реализовано как переключение между режимами или как плавное изменение (аналог педали газа)​

Персонаж должен соответствовать геймплею визуально и механически

## Idle-анимации (отсутствие движения)

Все, что медленнее стелса, уже не является геймплеем. Нельзя заставлять игрока ждать. Пока игрок ничего не делает, что-то должно происходить на экране — idle-анимации создают иллюзию жизни персонажа даже в покое.​

Принципы создания idle-анимаций:

- **Базовый цикл:** обычно это дыхание с движением вперед-назад, напряжением и расслаблением​
- **Слои движения:** базовое движение тела, покачивание головы, движение аксессуаров​
- **Вариации:** макро-вариации, происходящие каждые 3-6 циклов
- **Непрерывность:** персонаж постоянно в движении, что помогает скрыть зацикливание​
- **Примеры idle-действий:** повертеть что-то в руках, перезарядка оружия, размять шею или пальцы, поиграть на воображаемом инструменте, позвонить по телефону, что-то съесть, почесаться, зевнуть, заснуть, почитать и т.д.​

Эти анимации не должны давать игрового преимущества и не должны быть долгими и сложными.

## Темп геймплея: быстрое и медленное
Западная психология движения — слева направо (слева можно оставлять пасхалки). Восточная психология — справа налево (так можно создавать дополнительную сложность для западных игроков).​

>[!Important] Важный принцип: ходьба сама по себе не является геймплеем. Зачастую после некоторого времени игроки начинают ускоряться. Можно сделать ходьбу быстрее или добавить бег.​

Способы замедлить игрока:

- Узкие проходы
- Ловушки, срабатывающие при беге
- Множество обрывов
- Зоны, требующие осторожности

**Быстрые механики:**
- Бег
- Полет
- Стрельба
- Прыжки
- Вождение
- Отскакивание от стен

**Медленные механики:**
- Ходьба
- Плавание
- Лазание
- Приседание
- Толкание/подъем предметов
- Элементы стелса

Лучший вариант геймплея — чередование быстрых и медленных секций.​

## Транспорт и физика

Если персонаж — это транспортное средство, или персонаж садится в транспортное средство, движение должно быть быстрее обычного. Важно реализовать правильную физику транспорта:​

- **Инерция:** больше масса — больше занос​
- **Распределение веса:** влияет на управляемость на низких скоростях​
- **Аэродинамика:** определяет поведение на высоких скоростях​
- **Торк и момент инерции:** определяют ускорение и вращение​

Если физика транспорта не соответствует его внешнему виду, это будет раздражать игрока. Все должно влиять на персонажа и соответствовать метрикам игры.​

## Вода и плавание
Вода часто равна смерти в играх — это простое решение для ограничения игрового пространства. Если плавать можно, необходимы четкие границы:​

- Невидимая стена
- Видимая, объяснимая геймплейно граница
- Смысловые ограничения (акулы, течения, выносливость и т.д.)

При прототипировании важно решить:​

- Может ли игрок плавать под водой?
- Если да — сколько времени можно проводить под водой?
- Можно ли продлить время под водой с помощью предметов?
- Может ли игрок атаковать под водой? Каким оружием?
- Может ли игрок взаимодействовать с объектами под водой?

Вход в воду и выход из воды должны различаться визуально и анимационно. В плавании меняются метрики скорости — обычно персонаж движется медленнее в воде.​

**Защита от дурака:** ограничение в виде дна предотвращает бесконечный спуск вниз.​

## Сползание и зацепы

Возможность игроку забраться на уступ и быть незаметным для врага добавляет вертикальность геймплею. Сползание обычно является анимацией, предупреждающей о падении.​

Концепция падения:

1. Игрок подходит к краю
2. При соскальзывании проигрывается предупреждающая анимация
3. Игрок получает визуальное/аудио предупреждение о падении
4. Если результат неудачный — смерть персонажа
5. Есть ли контроль над падением?
6. Если можно управлять — нужна анимация контролируемого падения
7. Если нельзя — анимация страха
8. Можно ли сделать финальный прыжок для спасения?
9. Урон от падения должен быть понятен с первого уровня

## Тень персонажа
Тень должна быть четко под персонажем. Она задает ощущение веса и массы, передает настроение и используется как механика в стелс-играх.​​

Технологии реализации тени:

- **Простая проекция:** кружок под персонажем (самый распространенный метод)​
- **Проецируемая тень:** спрайт персонажа, умноженный на прозрачный черный, сжатый и наклоненный​
- **Продвинутые системы:** тень рендерится на невидимый слой, который сэмплирует фон с учетом глубины каждого пикселя (пример: Rain World)​

Тень не должна появляться там, где ее быть не должно. Тень должна быть видна на всех поверхностях и отличаться на разных текстурах.​​

## Нечеловеческие персонажи
Все непрямоходящие существа имеют больший радиус движения. Анимация требует больше пространства и времени. Животные обычно движутся быстрее человека. Масса влияет на движение — тяжелые существа движутся с инерцией.​

Любое превращение в животное должно менять геймплей — это не просто косметическое изменение, но новый набор возможностей и ограничений.

## Визуальные эффекты и обратная связь
Предметы, с которыми можно взаимодействовать, должны быть выделены. Персонаж может поворачивать глаза и голову к интерактивным объектам. Анимация взаимодействия необходима для создания связности действий. Персонаж может комментировать свои действия голосом.​

Отображение здоровья:

Здоровье игрока должно отображаться визуально. Если здоровье низкое, это должно быть видно на персонаже — изменение позы, появление ран, изменение походки. Визуальные эффекты — отличный способ передачи информации игроку:​

- Виньетирование при низком здоровье
- Эффекты на экране при получении урона
- Изменение цвета персонажа
- Дым, огонь, искры на поврежденных объектах​

## Инвентарь и экипировка:

Инвентарь должен быть виден на персонаже. Возможность переодевать персонажа и менять экипировку повышает вовлеченность. Оружие можно изменить или улучшить. В зависимости от способностей оружия следует придавать ему соответствующий внешний вид. В зависимости от вида оружия должна меняться анимация.​

## SPC (Second Person Character) — Компаньоны
Компаньоны или возможность переключения между персонажами добавляют глубину геймплею.​

Способы переключения:

- Смена через горячие клавиши
- Круговое меню
- Список персонажей
- Переключение на ближайшего героя

Функции компаньонов:

- Помогают в бою
- Дают подсказки и информацию
- Предоставляют дополнительные способности
- Создают эмоциональную связь​

Спутники не всегда люди — это могут быть животные, роботы, духи и другие существа. Характеры спутников должны быть уникальны — каждый должен иметь свою личность, мотивацию и возможно предысторию.

Важно: компаньоны не должны затмевать главного героя. Они обычно играют поддерживающие роли — лечение, баффы, дебаффы, танкование. При проектировании компаньонов следует учитывать систему лояльности и их реакции на действия игрока.

## Система камеры
Камера — один из важнейших элементов игрового дизайна, определяющий перспективу игрока и влияющий на весь игровой опыт.

1. Статичная камера
Размещается в самых нужных местах, чтобы четко направить игрока. Позволяет добавить динамику, анимацию и эффекты, не прорисовывая все детали мира. Характерна для ранних хоррор-игр (Resident Evil, Alone in the Dark).​

Преимущества:

- Кинематографичность
- Контроль внимания игрока
- Экономия ресурсов

Недостатки:

- Ограниченная свобода обзора
- Может затруднять навигацию

2. Двигающаяся камера
Дает возможность взаимодействовать с окружением. Игрок имеет контроль над камерой в определенных пределах. Используется в квестах и головоломках.​

Требования:

- Качественные ограничения, чтобы не смотреть сквозь текстуры
- Прорисовка боковых областей
- Не делать слишком быструю прокрутку

3. Следящая камера (Following Camera)
Сфокусирована на объекте и перемещается вместе с персонажем. Характерна для платформеров (Super Mario, Sonic).​

Принципы:

- Скорость движения камеры соответствует отдалению от персонажа
- Мир сзади персонажа не должен отвлекать, но и не должен исчезать полностью
- Камера может слегка отставать, создавая ощущение импульса

4. Камера, движущаяся сама
Игрок следует за камерой. Если персонаж вылетает за границы видимости камеры — проигрыш. Используется в авто-скроллерах, некоторых гонках и симуляторах.​

5. Камера от первого лица (First-Person)
Игрок видит мир глазами персонажа. Характерна для шутеров (Call of Duty, Half-Life).​

Преимущества:

- Полное погружение
- Интуитивное прицеливание
- Создает напряжение в хоррор-играх

Недостатки:

- Ограниченная ситуационная осведомленность
- Не видно персонажа и его экипировки
- Может вызывать motion sickness

6. Камера от третьего лица (Third-Person)
Показывает персонажа со спины или сбоку. Используется в экшенах и приключениях (God of War, Uncharted, Assassin's Creed).​

Варианты:

- Tight over-the-shoulder (близко за плечом) — для экшен-игр
- Medium follow camera (средняя следящая) — для приключений
- Wide orbital camera (широкая орбитальная) — для RPG

Преимущества:

- Лучшая пространственная осведомленность
- Видно персонажа и анимации
- Эмоциональная вовлеченность

Недостатки:

- Персонаж занимает место на экране
- Камера может застревать в геометрии

7. Свободная камера (Free Camera)
Игрок сам полностью управляет камерой. Характерна для игр с открытым миром, стратегий и песочниц.​

8. Комбинированная камера
Комбинация из нескольких типов камер в зависимости от ситуации. Например, от третьего лица в исследовании, прицеливание от первого лица, стратегический вид сверху для планирования.​

9. Кинематографическая камера
Используется для создания настроения и драматических моментов. Отбирает контроль у игрока для показа важных событий или создания атмосферы.​

## Высота камеры и восприятие
Высота камеры критически важна для ощущения размера мира и скорости движения. Следует финализировать высоту камеры как можно раньше, так как она влияет на то, насколько большим кажется игровой мир и его персонажи.​

Понятия "быстро" и "медленно" относительны размера тела. 4 мили в час для человека — это примерно одна длина тела в секунду, но для маленького насекомого это 100 длин тела в секунду.​

### Связь с лабораторной работой
Все описанные метрики напрямую применимы к проектированию персонажей для лабораторной работы №3. При создании пяти персонажей (главный герой, союзник, злодей, прихвостень, NPC) для выбранного сеттинга необходимо определить:​

Базовые метрики:
- **Размеры:** рост и масса персонажа
- **Скорость движения:** ходьба, бег, специальные режимы
- **Параметры прыжка:** высота, дальность (если применимо)
- **Здоровье (HP) и защита:** определяют живучесть​
- **Урон и скорость атаки:** определяют offensive capabilities
- **Энергия/мана/выносливость:** ресурс для способностей

Балансировка персонажей:
При проектировании важно создавать компенсирующие слабости. Если персонаж имеет высокий урон, логично дать ему меньшую скорость или защиту. Тяжелый босс может медленно двигаться, но иметь огромный запас здоровья.​

Роли персонажей:

- *Главный герой (протагонист):* персонаж, за которого переживает игрок, чьи цели движут историю вперед​
- *Злодей (антагонист):* создает конфликт, противостоит герою, должен быть достаточно силен, чтобы представлять угрозу​
- *Союзник:* дополняет способности героя, обеспечивает поддержку​
- *Прихвостень:* менее мощная версия злодея, создает промежуточные вызовы
- *NPC:* влияет на историю или геймплей без прямого участия в бою

Уникальные механики:
Каждый персонаж должен иметь минимум три оригинальных механики:​

- Специальные приемы или атаки
- Уникальные способности передвижения (рывок, полет, телепортация)
- Пассивные эффекты или бонусы
- Особые взаимодействия с окружением

Impact score:
Субъективный показатель важности персонажа для баланса и сюжета. Главный герой имеет высокий impact score, рядовой NPC — низкий.​

Визуальный дизайн:
Персонажи должны быть узнаваемы по силуэту. Хороший тест — отобразить их в виде тени и убедиться, что они различимы. Внешний вид должен соответствовать роли: тяжелый танк должен выглядеть массивно, быстрый разбойник — поджаро и гибко.​

Все эти метрики и принципы должны логично вписываться в выбранный сеттинг (фэнтези, научная фантастика, постапокалипсис, современность или стимпанк), создавая целостный и сбалансированный игровой опыт.

Понимание и правильное применение метрик персонажа — фундаментальный навык игрового дизайнера. Эти параметры определяют не только то, как персонаж движется и взаимодействует с миром, но и то, как игрок воспринимает и ощущает игру. Тщательное проектирование каждой метрики, от скорости ходьбы до системы камеры, создает основу для увлекательного и сбалансированного игрового опыта.
