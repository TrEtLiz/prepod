# Лекция 9: Архитектура игровых систем - Правила, режимы и навыки

## Введение

На предыдущей лекции мы говорили о вероятности как о инструменте создания интереса в игре. Теперь переходим к более высокому уровню архитектуры — к системам, которые превращают отдельные механики в целостный игровой опыт.

Представьте себе здание:
- **Вероятность** — это кирпичи (отдельные элементы)
- **Правила** — это строительный план (как кирпичи связаны)
- **Режимы** — это комнаты (разные способы использования)
- **Навыки** — это двери и окна (как игрок взаимодействует)

В этой лекции мы научимся проектировать эти системы так, чтобы они работали вместе гармонично.

## Часть 1: Анализ видов правил

### 1.1 Фундаментальные правила: Основа всего

**Определение**: Правила, которые игроки воспринимают как естественные и не требующие объяснения.

**Почему они так важны?**

Фундаментальные правила — это контракт между разработчиком и игроком. Когда правило фундаментально, игрок может не думать о нём и сосредоточиться на стратегии. Нарушение фундаментального правила без объяснения ломает этот контракт.

**Примеры фундаментальных правил в разных жанрах:**

*Платформеры:*
- Гравитация притягивает персонажа вниз
- Прыжок отправляет персонажа вверх, затем вниз
- Приземление на платформу удерживает персонажа на месте
- Падение в пустоту убивает персонажа

Почему это фундаментально? Потому что это соответствует реальной физике, которую все знают с детства.

*Шутеры:*
- Нажатие на триггер стреляет пулями
- Пули летят прямо в центр экрана
- Враги умирают, когда получают достаточно урона
- Стены блокируют пули и движение

Почему это фундаментально? Потому что это совпадает с игровыми ожиданиями, сформированными жанром.

*RPG:*
- Враги на карте видны как визуальные объекты
- При взаимодействии с врагом начинается боевая система
- Повышение уровня делает персонажа сильнее
- Экипировка даёт статистические бонусы

Почему это фундаментально? Потому что это повторяется в каждой RPG, и игроки уже знают эти правила.

**Где разработчики ошибаются:**

1. **Нарушение без причины**: Если в платформере персонаж может прыгать вверх бесконечное количество раз только в одной комнате, это нарушает контракт. Игрок будет в замешательстве.

2. **Неконсистентность**: Если в одной части уровня враг блокируется стеной, а в другой проходит сквозь неё, это ломает логику.

3. **Забывчивость**: Разработчики часто забывают, что новичок не знает фундаментальные правила. Нужен минимальный туториал.

**Практическое применение:**

Когда проектируете новую игру, напишите список всех фундаментальных правил. Это ваша "библия жанра":

```
Жанр: 2D платформер
Фундаментальные правила:
1. Персонаж движется влево/вправо клавишами A/D
2. Персонаж прыгает пробелом
3. При двойном прыжке первый прыжок идёт выше
4. На наклонной поверхности персонаж не скользит
5. Враги неподвижны, пока игрок не приближается на 5 метров
6. Враги умирают в один удар
```

Каждое из этих правил должно быть истинным для 95% игры. Если вы нарушаете правило, это должно быть специально для кульминационной сцены.

### 1.2 Правила управления: Язык игрока

**Определение**: Явные правила, которые кодируют управление персонажем.

**Пример из Elden Ring:**

| Действие | Клавиша | Контекст |
| Движение | Левый аналоговый стик | Всегда |
| Атака | Правый клик (ПК) / R1 (Консоль) | Во время боя |
| Сильная атака | Правый клик + зажим | Во время боя |
| Блокирование | L1/LB | Во время боя, с щитом |
| Парирование | L1 + определённый момент | Во время боя, с оружием парирования |
| Магия | L1 + R1 / LB + RB | Если есть магия в слотах |
| Предмет | D-pad вверх/вниз | Всегда |
| Меню | ESC / Menu | Всегда |

**Консистентность как ценность:**

>[!Tip]
> Консистентность - это однородность в правилах управления. Если игрок знает, что кнопка X всегда прыгает, он не будет путаться.

Когда правила управления консистентны, игрок создаёт "мышечную память". Он начинает действовать, не думая. Это делает игру более отзывчивой и приятной.

**Ошибка разработчика: Контекстное управление**

Плохой пример:
- В одном уровне E открывает двери
- В другом уровне E активирует магию
- В третьем уровне E разговаривает с NPC

Результат: Игрок постоянно делает не то, что планировал.

Хороший пример:
- E всегда активирует ближайший объект (дверь, NPC, предмет)
- Система автоматически определяет, что делать в зависимости от контекста

**Принцип проектирования: Минимум кнопок, максимум смысла**

На мобильных устройствах это особенно критично:
- Максимум 4-5 активных кнопок на экране
- Каждая кнопка должна иметь одну ясную функцию
- Комбинации кнопок минимизируются

На ПК и консолях можно использовать больше:
- ПК: мышь + 20+ клавиш
- Консоль: 10+ кнопок на геймпаде

### 1.3 Правила поведения: Язык вашего мира

**Определение**: Интуитивные правила, которые воспринимаются через опыт.

**Цветовое кодирование в Hollow Knight:**

```
Жёлтый светящийся враг → Боевой враг, опасен
Серый враг без подсветки → Враг с низкой угрозой
Красный враг → Боссовый враг, очень опасен
Синий враг → Враг со спецспособностью
```

Игрок начинает интуитивно понимать эти правила после 10-15 минут игры. Затем разработчик может строить на этих знаниях.

**Паттерны и их нарушение:**

В классическом видеоигровом синтаксисе:
- Красный цвет = опасность
- Зелёный цвет = помощь
- Жёлтый цвет = внимание
- Синий цвет = холод/ледяная магия
- Оранжевый цвет = огонь

Если вы нарушаете эти паттерны, игроки заметят и будут в замешательстве. Иногда это нарушение имеет смысл (например, в хоррор-игре красный цвет может быть безопасным местом), но тогда его нужно объяснить.

**Звуковые правила поведения:**

Звуки работают так же:
- Резкий, тревожный звук → опасность рядом
- Спокойный звук → всё хорошо
- Повторяющийся звук → что-то требует внимания
- Тишина → потеря или отчуждение

В Elden Ring, когда вы видите стол отдыха (Site of Grace), раздаётся определённая музыка. Вы интуитивно понимаете, что здесь безопасно.

**Текстурные правила поведения:**

Визуальные паттерны:
- Мерцающие текстуры → объект неполноценный или временный
- Яркие линии → путь, по которому нужно идти
- Тёмные углы → место для скрытности
- Развалины → место с секретами

В Metroid, яркая дверь всегда означает, что здесь есть что-то для вас. Если дверь тёмная, значит, вам нужна специальная способность.

**Ошибка разработчика: Несогласованные паттерны**

Плохой пример (вымышленная игра):
- Красная коробка на одном уровне содержит золото (+50 XP)
- На другом уровне красная коробка содержит ловушку (-50 XP)

Результат: Игрок не может предсказать результат, игра кажется несправедливой.

**Практическое применение:**

1. Создайте "стиль-гайд" для вашей игры, например:
```
Оружие:
- Меч: жёлтый+коричневый
- Магия: синий+фиолетовый
- Дальнее оружие: зелёный+серебристый

Враги:
- Уровня 1-3: зелёная худоба
- Уровня 4-6: жёлтое/оранжевое туловище
- Уровня 7+: красная броня

Окружение:
- Безопасные зоны: яркое освещение + музыка в мажоре
- Опасные зоны: тусклое освещение + дронирующая музыка
- Загадки: загораются в ярко-голубой цвет при приближении
```

2. Тестируйте: Покажите новому игроку только визуальные паттерны, без объяснений. Может ли он понять логику?

### 1.4 Написанные правила: Обучение через действие

**Определение**: Правила, которые активно объясняются через туторы, диалоги и справку.

**Хороший туториал vs. плохой:**

*Плохой туториал (DOOM 3, 2004):*
```
Текстовое меню:
"Для передвижения используйте WASD"
"Для прыжка используйте ПРОБЕЛ"
"Для атаки используйте левую кнопку мыши"
...
```
Результат: Игрок читает 10 минут, затем забывает всё, потому что не практиковался.

*Хороший туториал (Portal, 2007):*
```
1. Комната пуста, только портал впереди
   → Игрок движется, случайно активирует портал
   → Появляется текст: "Отлично! Это портальная пушка"

2. Камера простреливает стену
   → Появляется подсказка: "Нажимайте ПКМ для стрельбы"
   → Игрок стреляет, создаёт синий портал

3. Тут же нужно создать оранжевый портал
   → Игрок практикует обе кнопки

4. Теперь нужно использовать оба портала вместе
   → Игрок натыкается на головоломку
```

Результат: Игрок учится через делание, а не через чтение.

**Принцип: Learning by Doing**

Каждое новое правило должно быть практиковано сразу после введения:

```
Уровень 1: Презентация правила (30 секунд чтения/показа)
         ↓
Уровень 2: Простая практика (1-2 минуты игры)
         ↓
Уровень 3: Практика в контексте (3-5 минут нормальной игры)
         ↓
Уровень 4: Практика в сложном контексте (5+ минут, введение вариаций)
```

**Пример из Celeste:**

```
Основной туториал:
- Уровень 1A: Только движение, никаких врагов
- Уровень 1B: Прыжок на платформу
- Уровень 1C: Прыжок на движущуюся платформу
- Уровень 2A: Враг, но неподвижный
- Уровень 2B: Враг, движущийся по предсказуемому паттерну
- Уровень 2C: Враг + движущаяся платформа (комбинация)
```

Каждый уровень занимает 2-5 минут. К концу туториала (уровень 3) игрок уже может справляться с основными ситуациями без подсказок.

**Техника "Показывать, не рассказывать":**

Вместо:
```
"При попадании в огонь теряется 10 HP"
```

Делайте:
```
Появляется огненная яма.
Текст: "Внимание: огонь!"
Если игрок прыгнет в огонь, его HP упадёт на 10.
На экране красная вспышка + звук боли.
```

Игрок запомнит это лучше, потому что испытал сам.

**Практическое задание:**

Возьмите одно новое правило из вашей игры (например, "система баффов"). Спроектируйте туториальную цепочку из 4 уровней, где игрок постепенно учится использовать баффы.

### 1.5 Законы: Справедливость в соревнованиях

**Определение**: Специальные правила для турниров, которые могут отличаться от основных.

**Почему нужны законы?**

Без законов сильная стратегия доминирует, и игра становится предсказуемой. Законы нужны для поддержания интереса на профессиональном уровне.

**Пример: League of Legends**

Каждый сезон (год) топ-игроки находят "сломанных" персонажей с винрейтом 55-60%. На турнирах обычные игроки выбирают этих персонажей, и матчи становятся скучными.

Решение: "Банн-фаза" — командная капитаны каждой команды выбирают 5 персонажей, которых нельзя использовать в этом матче.

```
Матч между Team A и Team B

Банн-фаза:
Team A: банит Апелиос (57% винрейт), Лилию (56% винрейт), Сераф (54% винрейт)
Team B: банит Зери (58% винрейт), Эко (55% винрейт)

Результат: Теперь все персонажи ~50% винрейта, матч справедливый
```

**Примеры законов в разных играх:**

*Counter-Strike: Global Offensive:*
- Оружие усиливает стоимость в зависимости от раунда
- На раунде 1 слабое оружие (ECO раунд)
- На раунде 5 сильное оружие (Full Buy раунд)
- Это создаёт стратегическое решение: идти в полную или сэкономить?

*Magic: The Gathering:*
- Турнирные деки имеют ограничение: не более 4 копий одной карты (кроме основных земель)
- Это предотвращает "комбо-деки", где одна карта используется 20+ раз
- Без этого правила один комбо работал бы в 100% случаев

*Hearthstone:*
- На турнирах игроки должны заранее заявить свои деки
- В групповой фазе каждый игрок играет с одной и той же декой все игры
- Это предотвращает адаптацию ("контер-пик")

**Ошибка разработчика: Законы слишком отличаются**

Плохой пример:
- Обычная игра: 100 персонажей, все одинаково сильны
- Турнирная версия: только 5 персонажей доступны, баланс неправильный
- Результат: турниры выглядят как другая игра

Хороший пример:
- Обычная игра: 100 персонажей, все ~50% винрейта
- Турнирная версия: 90 персонажей доступны, 10 забанены
- Результат: турниры выглядят как нормальная игра, только более справедливая

**Практическое применение:**

Если вы планируете турнирный режим:
1. Соберите данные о винрейтах каждого персонажа
2. Персонажей с >55% винрейтом поместите в "банн-лист"
3. Протестируйте турнир: должны ли быть изменения в правилах?

### 1.6 Официальные правила: Стандартизация

**Определение**: Финальная версия правил, которая используется во всех официальных соревнованиях.

**Версионирование в Dota 2:**

```
Версия 7.30 (March 2022):
- Добавлены 3 новых предмета
- 45 персонажей получили баланс-изменения
- Система лига-приоритета изменена

Версия 7.31 (May 2022):
- Баланс-изменения для 20 персонажей
- Исправлены 15 багов

The International 2022 будет использовать версию 7.31b (окончательная)
```

Все команды готовятся к одним и тем же правилам. Если разработчик выпустит патч прямо перед турниром, это создаст хаос.

**Принцип: Стабильность перед соревнованиями**

За 2-4 недели до турнира:
- Нет больших баланс-изменений
- Исправляются только критичные баги
- Версия объявляется официально

Это дает командам время подготовиться.

**Документирование правил:**

Официальные правила должны быть:
1. Написаны на понятном языке
2. Полные (никаких двусмысленностей)
3. Примеры для каждого правила
4. История изменений

Пример из Magic: The Gathering:
```
Правило 608.1: Во время боевой фазы боец наносит урон целям в порядке боя.

Пример 608.1a: Боец Артур атакует врага Мерлина.
- Артур имеет 5 силы
- Мерлин имеет 3 защиты, но способность "Блокирование снижает урон на 2"
- Урон = 5 - 2 = 3
- Мерлин теряет 3 HP

История:
- 2008: Оригинальное правило
- 2012: Уточнение про множественные способности
- 2020: Изменение механики взаимодействия
```

**Ошибка разработчика: Неполная документация**

Если правила нечёткие:
- Судьи не знают, как рассчитывать в спорных ситуациях
- Команды подают протесты
- Турнир теряет доверие

**Практическое применение:**

Если вы делаете соревновательную игру:
1. Напишите ясные официальные правила
2. Создайте FAQ с примерами спорных ситуаций
3. Обновляйте правила с каждым патчем
4. Уведомляйте команды за 2 недели

### 1.7 Оборудование: Технические ограничения как дизайнерский вызов

**Определение**: Платформы и устройства, на которых работает игра.

**Ограничения мобильного устройства:**

Смартфон 2024 года (в нижнем ценовом диапазоне):
- Процессор: 2 ядра, 2 ГГц
- ОЗУ: 3-4 GB
- Экран: 6 дюймов, 720p
- Сенсор: сенсорный экран, без геймпада

Результаты ограничений:
- Графика должна быть простой (максимум 10-15k полигонов на сцену)
- Нельзя иметь 100+ врагов на экране
- Управление должно быть касаниями (максимум 3-4 одновременных)
- Игра должна работать с прерыванием сигнала

Примеры игр:
- Candy Crush: очень простая графика, играет везде
- PUBG Mobile: пришлось значительно упростить графику

**Ограничения консоли (PlayStation 5):**

Характеристики:
- Процессор: 8 ядер, 3.5 ГГц
- Видеокарта: 10 TFLOPS
- ОЗУ: 16 GB
- Хранилище: 825 GB SSD
- Контроллер: 10 кнопок + 2 аналоговых стика

Результаты:
- Возможна сложная графика (высокое разрешение, много полигонов)
- Возможны крупные открытые миры
- Управление может быть сложным (много кнопок)
- Быстрая загрузка

Примеры игр:
- Elden Ring: используется вся мощь PS5
- Fortnite: тоже использует возможности PS5

**Ограничения ПК:**

Диапазон мощностей:
- Бюджетный ПК (2024): GTX 1050 Ti, 8GB RAM
- Средний ПК: RTX 2070, 16GB RAM
- Высокопроизводительный: RTX 4090, 128GB RAM

Разброс в 50 раз! Разработчик должен поддерживать все конфигурации.

Решение: Масштабируемая графика
```
Low (бюджетный ПК):
- Разрешение: 1080p
- Текстуры: 512x512
- Враги: максимум 20 на экране
- Расстояние видимости: 50 метров

Ultra (высокопроизводительный):
- Разрешение: 4K
- Текстуры: 4096x4096
- Враги: до 100 на экране
- Расстояние видимости: 500 метров
```

Примеры игр, которые хорошо масштабируются:
- Minecraft: работает от мобильного до 4090
- Cyberpunk 2077: поддерживает все диапазоны (хотя был багован на слабых ПК)

**VR ограничения:**

Специальные требования:
- Минимум 90 FPS (иначе укачивание)
- Минимум 110° поле зрения
- Минимум 6 DOF (степени свободы: x, y, z, pitch, roll, yaw)
- Минимум 2 контроллера с отслеживанием

Это очень строгие требования. Если не соблюдать, игра вызывает тошноту.

Примеры игр:
- Half-Life: Alyx: использует все VR возможности
- Beat Saber: требует только минимальное оборудование

**Практическое применение:**

При проектировании игры:
1. Определите целевые платформы
2. Для каждой платформы определите минимальные требования
3. Спроектируйте игру с этими требованиями в виду
4. Масштабируйте вверх, если есть возможность

### 1.8 Игра как продукт: Синтез всех правил

**Определение**: Финальный результат всех уровней правил.

**Цикл разработки игры:**

```
1. Фундаментальные правила
   "Это будет платформер с гравитацией"
   ↓
2. Правила управления
   "Игрок использует WASD для движения и ПРОБЕЛ для прыжка"
   ↓
3. Правила поведения
   "Красный враг опасен, зелёный враг слаб"
   ↓
4. Написанные правила
   "Туториал объясняет всё в первых 10 минут"
   ↓
5. Проектирование уровней
   "Уровень 1 простой, уровень 10 сложный"
   ↓
6. Балансирование
   "Враги справедливы, награды соразмерны"
   ↓
7. Тестирование
   "100 игроков играют, рождается обратная связь"
   ↓
8. Финальный продукт
   "Координированная система, где всё работает вместе"
```

**Признаки плохой игры:**

1. Несогласованность правил
   - Врагов трудно понять
   - Управление неинтуитивно
   - Туториал не объясняет механики

2. Несбалансированность
   - Один враг слишком сильный
   - Награды не соответствуют сложности
   - Определённая стратегия работает в 100% случаев

3. Скука
   - Противники повторяют паттерны
   - Нет прогрессии
   - Нет новых механик

**Признаки хорошей игры:**

1. Согласованность
   - Каждое правило логично следует из предыдущего
   - Новый игрок может интуитивно понять большинство механик
   - Опытный игрок может выполнить сложные вещи

2. Баланс
   - Разные стратегии имеют разные винрейты (~50%)
   - Прогрессирование ощущается справедливым
   - Удача и мастерство уравновешены

3. Глубина
   - 10 часов игры ещё раскрывают новые возможности
   - 100 часов игры и ещё есть чему учиться
   - Ветераны находят новые стратегии после месяцев

**Практическое применение:**

Каждую итерацию разработки спрашивайте себя:
1. Согласованы ли наши правила?
2. Сбалансирована ли игра?
3. Скучно ли играть?

Если ответ "нет" на любой вопрос — нужны исправления.

### 1.9 Рекомендованные правила: Голос сообщества

**Определение**: Неформальные правила, которые сообщество придумало.

**Примеры рекомендованных правил:**

*Dark Souls сообщество:*
- "Честное боевое содействие" (summon) использует 1v1 без помощников
- "Каждый босс должен быть побежден на уровне 30-50, не более"
- "Глупо использовать плащ невидимости в PvP"
- "Костры должны быть взяты в порядке, не пропуская"

*Minecraft выживание сообщество:*
- "Нельзя использовать творческий режим, только выживание"
- "Нельзя использовать читы типа /give"
- "Мифические места (например, край мира) должны быть посещены естественным путём"

*League of Legends сообщество:*
- "Новичкам рекомендуется играть на одной линии, пока не выучат основы"
- "При проигрыше не ходите в один и тот же район три раза подряд"
- "FF (surrender) только после 15 минут, если невозможно выиграть"

**Почему рекомендованные правила важны?**

Они создают культуру сообщества. Если новичок присоединится и все скажут "так принято играть", он почувствует себя частью группы.

**Опасность несоответствия:**

Если рекомендованные правила сообщества противоречат официальным правилам, может возникнуть раскол:

Пример из World of Warcraft:
- Официальное правило: PvP сервер, можно атаковать врагов везде
- Рекомендованное правило сообщества: "Не атакуйте врага, который не в боевой позе"
- Результат: половина сервера уважает "честь", половина атакует всех

Это создаёт конфликты и невозможность играть.

**Принцип: Слушайте сообщество**

Если большинство игроков придерживаются определённого неписаного правила, рассмотрите введение его в официальные правила. Это покажет, что вы слушаете игроков.

**Практическое применение:**

1. Запустите игру в бета-тестировании
2. Следите за форумами и соцсетями
3. Отметьте, какие неписаные правила возникают
4. Если большинство поддерживает — введите в официальные правила

### 1.10 Обратная связь: Цикл улучшения

**Определение**: Реакция и отзывы игроков.

**Источники обратной связи:**

1. **Аналитика данных**
   - Какой процент игроков достигает босса 5?
   - Сколько времени игрок играет в день 1 vs день 30?
   - Какой персонаж имеет винрейт 70%? (слишком сильный)

2. **Опросы и интервью**
   - Что вам нравится? Что нет?
   - Какая механика непонятна?
   - Хотели бы вы видеть новый контент?

3. **Тестирование на фокус-группах**
   - Показываем прототип 50 людям
   - Записываем их реакции
   - Ищем общие точки боли

4. **Форумы и соцсети**
   - "У босса 3 слишком много HP!"
   - "Магия слишком слаба по сравнению с мечом"
   - "Туториал слишком долгий"

5. **Профессиональная сцена**
   - Топ-игроки находят "сломанные" комбо
   - Их стримы показывают проблемы
   - Они влияют на восприятие баланса

**Цикл обратной связи:**

```
Версия 1.0 выпущена
    ↓
Игроки играют 1000 часов
    ↓
Собирается обратная связь:
- Босс 3 бьёт слишком сильно
- Магия слаба
- Туториал непонятен
    ↓
Анализ данных подтверждает:
- Текущий boss убивает 98% новичков на первой попытке (плохо, должно быть 50%)
- Средний винрейт магии: 35% (плохо, должно быть 50%)
- 25% новичков не проходят туториал
    ↓
Разработка патча 1.1:
- Босс 3: урон -20%
- Магия: урон +30%
- Туториал: переработан, чище и понятнее
    ↓
Версия 1.1 выпущена
    ↓
Игроки снова играют...
```

**Лучшие практики по обратной связи:**

1. **Слушайте всех, но приоритизируйте данные**
   - "Босс слишком сложный!" ≠ "Средний новичок проходит босса в 5% случаев"
   - Используйте данные как объективное мерило

2. **Не реагируйте на каждый отзыв**
   - Если один игрок говорит "магия слаба", подождите
   - Если 100 игроков говорят "магия слаба", действуйте

3. **Балансируйте патчи**
   - Усиливая магию, не забудьте ослабить меч
   - Иначе нарушится новый баланс

4. **Объявляйте изменения заранее**
   - "В версии 2.0 магия получит +25% урона"
   - Игроки смогут подготовиться

5. **Изменяйте постепенно**
   - Сначала +10%, смотрите результаты
   - Затем +15%, если нужно
   - Никогда +100% разом

**Опасность переизменений:**

Если вы слишком активно вносите изменения, игра становится непредсказуемой. Игроки не знают, что будет в следующей версии.

Пример из Diablo III:
- Версия 2.0: большой баланс-патч
- Версия 2.1: маленький баланс-патч
- Версия 2.2: большой баланс-патч
- ...
- После 10+ версий игроки не знали, как играть

Решение: Ясный график изменений
- "Мы выпускаем баланс-патч один раз в месяц"
- "Основные механики меняются один раз в квартал"

**Практическое применение:**

1. Установите систему сбора обратной связи (форум, опрос, аналитика)
2. Определите метрики успеха (винрейт, среднее время, retention)
3. Еженедельно анализируйте данные
4. Ежемесячно выпускайте баланс-патчи
5. Ежеквартально выпускайте большие патчи с новым контентом

## Часть 2: Режимы игры в деталях

### 2.1 Кампания (Campaign): История как направляющая сила

**Что такое кампания?**

Кампания — это основной нарративный режим, где игрок следует историям, выполняет квесты и взаимодействует с миром и персонажами. Это центральный опыт для большинства однопользовательских игр.

#### 2.1.1 Характеристики кампании

**Линейный или полулинейный прогресс**

Линейный прогресс:
- Игрок идёт с точки A к точке B
- Нет выбора маршрута
- История происходит в определённом порядке
- Примеры: Half-Life 2, God of War (2018)

Полулинейный прогресс:
- Основной путь линеен
- Но есть побочные квесты, которые можно делать в любом порядке
- Игрок может пропустить побочные квесты
- Примеры: The Witcher 3, Baldur's Gate 3

Открытый мир прогресс:
- Полная свобода выбора порядка квестов
- Можно играть как угодно
- Примеры: Skyrim, GTA V

**Почему это важно?**

Линейный прогресс гарантирует, что все игроки видят одну и ту же историю в одном порядке. Но это может казаться ограничивающим.

Открытый мир даёт свободу, но может привести к потере нити сюжета.

**Глубокая история и персонажи**

Хорошая кампания должна иметь:
- Главного персонажа, в которого игрок хочет верить
- Антагониста, который мотивирует (не просто "плохой парень")
- Побочных персонажей, которые развиваются
- Поворотные моменты, которые удивляют
- Эмоциональные сцены, которые запоминаются

Пример из The Witcher 3:
- Главный герой: Геральт, бродячий охотник на чудовищ
  - У него есть прошлое, которое раскрывается
  - Он принимает моральные выборы
  - Его отношения с другими персонажами развиваются

- Антагонист: Белая роза (вторая часть) и Кровавый барон (побочный квест)
  - Не просто "плохой"
  - Имеют мотивы, которые понятны
  - Игрок может сочувствовать или ненавидеть их

- Побочные персонажи: Трисс, Йеннифер, Цири
  - Развиваются на протяжении игры
  - Их отношения с Геральтом меняются
  - Ваши выборы влияют на них

**Фокус на одиночной игре (или кооперативе)**

Большинство кампаний сосредоточены на одиночной игре. Игрок — главный герой, мир вращается вокруг него.

Но некоторые кампании поддерживают кооперативную игру:
- Divinity: Original Sin 2 — полная кооперативная кампания
- Valheim — кооперативное выживание, но без нарратива
- Grounded — кооперативное исследование

Если кампания кооперативная, нужно решить:
- Оба игрока видят один и тот же кинематик, или каждый свой?
- Один игрок может прогрессировать дальше, или они синхронны?
- Как система сохранений работает?

**Обычно занимает 10-100+ часов**

Примеры длины:
- Короткая кампания (8-12 часов): Portal, The Stanley Parable
- Средняя кампания (20-40 часов): God of War, Elden Ring (кампания, не DLC)
- Длинная кампания (60-100+ часов): The Witcher 3, Baldur's Gate 3

Длина зависит от дизайна:
- Если есть много побочных контента, кампания может быть 100+ часов
- Если кампания линейная, обычно 20-40 часов

**Важный момент: Время должно быть заполнено**

Плохой пример:
- Кампания "должна быть 50 часов"
- Но интересного контента только на 20 часов
- Остальные 30 часов заполнены гриндом (повторяющимися действиями)
- Результат: игроки заскучают и бросят игру

Хороший пример:
- Кампания 50 часов
- Каждые 5 часов новая механика, враг или локация
- Сюжет постоянно развивается
- Результат: игроки могут играть все 50 часов и захотеть продолжения

#### 2.1.2 Дизайнерские рекомендации для кампании

**Темп как музыка**

Кампания должна варьировать темп, как хорошая песня:

```
Часы 0-2: Медленное введение
- Новый мир, новые персонажи
- Низкая опасность
- Учимся управлению

Часы 2-5: Ускорение
- Враги становятся сложнее
- Появляются новые механики
- Сюжет ускоряется

Часы 5-10: Кульминация
- Крупный боссовый бой
- Поворот сюжета
- Высокие ставки

Часы 10-15: Спад и восстановление
- Время для дыхания
- Развитие персонажей
- Подготовка к следующей волне

Часы 15-20: Второе ускорение
- Более высокие ставки, чем первая волна
- Враги сильнее
- Сюжет ещё более напряжён
```

Если весь 20-часовой опыт — это постоянное ускорение без передышки, игроки устанут.

Если весь опыт — это медленная фаза, игроки заскучают.

**Эскалация урона и сложности**

Враги должны постепенно становиться сильнее:

```
Уровень 1-5: Враги наносят 10 урона
Уровень 6-10: Враги наносят 20 урона
Уровень 11-15: Враги наносят 40 урона
Уровень 16-20: Враги наносят 80 урона
Но персонаж тоже становится сильнее!
HP персонажа: 50 → 100 → 200 → 400
```

Без эскалации игра становится скучной. Враги с уровня 1 остаются такими же до конца.

**Введение новых механик**

Каждые 5-10 часов игры должна появиться новая механика:

```
Час 1-5: Основной боевой механизм (нажать атаку, избежать врага)
Час 5-10: Система магии (нажать Z для магии)
Час 10-15: Система паркура (новые способности передвижения)
Час 15-20: Система союзников (может присоединиться NPC)
```

Если всегда одна и та же механика, скука гарантирована.

**Квесты как направляющая сила**

Не просто скажите игроку "идите отсюда туда". Дайте ему причину:

Плохо:
- "Квест: Сделайте 100 убийств"
- Просто счётчик, нет смысла

Хорошо:
- "Квест: Король объявил награду за головы орков. Мудрец говорит, что орки готовят вторжение. Пойди останови их перед атакой."
- Игрок понимает, что происходит и почему это важно

**Система челлендж-ответ**

```
Челлендж: Враг появляется
Ответ: Игрок атакует
Результат: враг теряет HP

Челлендж: Враг блокирует атаку
Ответ: Игрок должен найти другой способ (магия, парирование)
Результат: враг уязвим

Челлендж: Враг очень быстрый
Ответ: Игрок должен перебежать в правильную позицию
Результат: враг отрезан от подкреплений
```

Каждый челлендж обучает что-то новое.

#### 2.1.3 Примеры из игр

**Elden Ring (кампания)**

Характеристики:
- Полулинейный прогресс (можно идти в разные области в разном порядке)
- Глубокие персонажи (побочные персонажи имеют целые истории)
- Одиночная игра (можно вызвать помощника, но это опциональный помощник, не требуется)
- 50-100+ часов (зависит от помощника и побочных заданий)

Темп:
- Первые 10 часов: исследование, много новых врагов
- 10-30 часов: боевые испытания, несколько крупных боссов
- 30-50 часов: финальные испытания, конец сюжета
- 50-100+ часов: побочное содержание, тайные зоны

**Baldur's Gate 3 (кампания с выбором)**

Характеристики:
- Открытая структура (можно выполнять квесты в разных порядках)
- Очень глубокие персонажи (каждый может развиваться годами)
- Кооперативная кампания доступна (но не требуется)
- 60-200+ часов (зависит от выбора и побочных квестов)

Особенность: выбор игрока влияет на историю
- Если вы убьёте важного NPC в акте 1, акт 2 будет совсем другим
- Много путей к концу игры
- Никакого одного "правильного" прохождения

**God of War (2018) (линейная кампания)**

Характеристики:
- Линейный прогресс (история идёт в определённом порядке)
- Глубокая история (отношение между отцом и сыном развивается)
- Одиночная игра (никакого мультиплея)
- 30-50 часов (зависит от сложности)

Особенность: бесшовная камера
- Камера никогда не переходит в другой угол
- Всё показано в реальном времени
- Это создаёт ощущение сопричастности

#### 2.1.4 Частые ошибки в дизайне кампании

**Ошибка 1: Переиспользование гринда**

Гринд — это повторяющееся действие для получения опыта/золота.

Плохо: Игрок должен убить 100 врагов одного типа для опыта
Хорошо: Игрок убивает врагов естественно во время исследования, опыт накапливается

Плохо: Квест "Собери 50 цветов"
Хорошо: Квест "Найди редкие цветы для зелья" (цветов 5-10, но они в интересных местах)

**Ошибка 2: Нестабильный уровень сложности**

Враги должны становиться медленнее:

Плохо:
- Враги уровней 1-5: очень слабые (10 урона)
- Враги уровня 6: смертельные (200 урона)
- Враги уровней 7-10: обратно слабые (20 урона)

Хорошо:
- Враги уровней 1-5: 10 урона
- Враги уровней 6-10: 15 урона
- Враги уровней 11-15: 25 урона
- Враги уровней 16-20: 40 урона

**Ошибка 3: Слишком много киноматиков**

Киноматики (видеоролики) могут перегрузить:

Плохо: После каждого боя 3-минутный киноматик
Хорошо: Киноматики только в важных моменты (после боссов, поворотов сюжета)

**Ошибка 4: Неясные цели**

Если игрок не знает, что делать, он теряется.

Плохо: Появляется маркер на карте, но игрок не знает, почему он там
Хорошо: NPC говорит: "Иди туда, в норе живёт враг, который убил мою семью"

**Ошибка 5: Добавить 100 режимов**

Не переполняйте кампанию другими режимами.

Плохо:
- Кампания: 20 часов
- Аркада: 30 часов
- Турниры: 20 часов
- Головоломки: 15 часов
- Управление городом: 25 часов
Результат: ничто не глубоко, всё поверхностно

Хорошо:
- Кампания: 50 часов (основное внимание)
- Побочные квесты: 20 часов (дополнение)
- Аркада: 10 часов (небольшой режим для перерывов)

### 2.2 Сетевая игра (Online Multiplayer): Человек против человека

**Что такое сетевая игра?**

Это режим, где реальные игроки играют друг против друга или вместе через интернет. Основной фокус — на соревновании между игроками.

#### 2.2.1 Характеристики сетевой игры

**PvP (Player vs Player) фокус**

Сетевая игра обычно сосредоточена на игроке против игрока:

Типы PvP:
- 1v1: один на один (шахматы, файтинги)
- Team vs Team: команда на команду (Counter-Strike 5v5, League of Legends 5v5)
- Royale: много игроков, выжить должны быть последние (Fortnite, PUBG)
- PvPvE: игроки против друг друга, но враги компьютера вмешиваются (Phasmophobia)

**Баланс как главный приоритет**

В сетевой игре баланс важнее, чем в кампании.

Почему?
- Если враг в кампании сильнее, игрок может снизить сложность
- Если противник в сетевой игре сильнее, это несправедливо

Примеры дисбаланса:
- Персонаж A имеет винрейт 70%, персонаж B имеет винрейт 30%
- Все выбирают персонажа A
- Никто не выбирает персонажа B
- Игра становится предсказуемой

Решение: Постоянный баланс-патчи
- Ежемесячно анализируем винрейты
- Персонажей с >55% слабим
- Персонажей с <45% усиливаем

**Рейтинговая система**

Большинство сетевых игр имеют рейтинг:

Простая система:
```
Бронза: 0-1000 очков (новички)
Серебро: 1000-2000 очков (средние)
Золото: 2000-3000 очков (хорошие)
Платина: 3000-4000 очков (ветераны)
Алмаз: 4000+ очков (профессионалы)
```

Ежегда вы выигрываете:
- +25 очков при победе
- -25 очков при поражении

Это гарантирует, что игрок играет с людьми примерно одного уровня.

**Масса тестирования и баланса**

В отличие от кампании, сетевые игры требуют огромного количества тестирования:

Рекомендация: 30-50% времени разработки на тестирование баланса
- 100+ часов на каждого персонажа
- Все комбинации персонажей протестированы
- Анализ данных показывает проблемы

#### 2.2.2 Примеры сетевых игр

**Counter-Strike: Global Offensive (5v5 тактический боевик)**

Характеристики:
- 5v5: каждая команда имеет 5 игроков
- Раунды: каждый матч состоит из 30 раундов
- Экономика: оружие покупается на деньги, полученные за убийства
- Баланс: много изменений, но всегда справедливо

Почему это работает?
- Каждый раунд даёт новый старт
- Выбор оружия стратегический (потратить много денег или сэкономить?)
- Работает командная работа (один громкий фраг менее ценен, чем координация)

Баланс-примеры:
```
Раунд 1 (ECO раунд): деньги ограничены
Team A: покупает пистолеты
Team B: покупает пистолеты
Статус: равно

Раунд 2: Team A побеждает
Team A: покупает винтовки (много денег)
Team B: не может позволить винтовки
Статус: Team A имеет преимущество

Раунд 3: Team A побеждает
Team A: продолжает полный скупку
Team B: "ECO раунд" снова (копить деньги)
Статус: Team A имеет большое преимущество
```

Это создаёт волны преимущества, а не постоянное доминирование.

**League of Legends (5v5 MOBA)**

Характеристики:
- 5v5: каждая команда имеет 5 персонажей с разными ролями
- Линии: три линии (top, mid, bottom), где встречаются враги
- Уровни: персонажи набирают уровни и становятся сильнее
- Баланс: ежемесячный баланс-патч, 160+ персонажей

Почему это работает?
- Разные роли нужны разные навыки (поддержка требует командной работы)
- Ранняя игра (уровни 1-6) отличается от поздней (уровни 16+)
- Есть много способов выиграть (убийства, захват башень, объектов)

Баланс-примеры:
```
Персонаж A (магический урон):
- Винрейт: 52% (слишком высокий)
- Изменение: -5% мана за способность
- Новый винрейт: 50% (идеально)

Персонаж B (атакующий):
- Винрейт: 48% (слишком низкий)
- Изменение: +10% критический урон
- Новый винрейт: 50% (идеально)
```

**Fortnite (Battle Royale, до 100 игроков)**

Характеристики:
- 100 игроков: все начинают на одном острове
- Последний выживший побеждает
- Строительство: можно строить стены и крыши
- Разнообразие оружия: много разных типов оружия

Почему это работает?
- RNG (случайность) даёт всем шанс (новичок может найти хорошее оружие рядом со стартом)
- Навык тоже важен (опытный игрок может выиграть против новичка даже с худшим оружием)
- Каждый матч уникален (разные локации, разные враги)

Баланс:
- Оружие 1 имеет 40% шанс убийства врага на расстоянии 50м
- Оружие 2 имеет 50% шанс убийства врага на расстоянии 30м
- Оружие 3 имеет 60% шанс убийства врага на расстоянии 10м

Каждое оружие хорошо в своей нише.

#### 2.2.3 Типичные проблемы в сетевых играх

**Проблема 1: Дисбаланс персонажей**

Если персонаж A переусилен:
- Все выбирают персонажа A
- Матчи становятся A vs A
- Никто не выбирает персонажа B
- Конкурентная сцена заскучала

Решение: Постоянный мониторинг винрейтов
```
Каждую неделю:
1. Собираем данные: 100000+ матчей
2. Рассчитываем винрейт каждого персонажа
3. Персонажей с >55% выявляем
4. Выявляем причину (слишком сильная способность? слишком быстро восстанавливается HP?)
5. На следующий патч вносим изменение
```

**Проблема 2: Читерство**

Читеры портят опыт для всех.

Типы читов:
- Aimbot: автоматическое наведение
- Wallhack: видит врагов сквозь стены
- Speedhack: ускоренное движение
- Item duplication: копирование редких предметов

Решение: Многоуровневая система защиты
```
Уровень 1: Anti-cheat ПО
- Следит за ненормальными действиями (совершенство точность)
- Автоматически банит явных читеров

Уровень 2: Обзор опытными игроками
- Опытные игроки смотрят демо подозрительных матчей
- Они голосуют: читер или не читер?

Уровень 3: Машинное обучение
- Алгоритм учится на примерах читеров
- Выявляет новые паттерны читерства

Результат: За 10000 матчей выявляется 99% читеров
```

**Проблема 3: Токсичность сообщества**

Если игрок теряет, он может быть грубым к своей команде или противникам.

Решение: Система отчётов и наказаний
```
Если игрок получит 5 отчётов за токсичность:
- День 1-3: предупреждение
- День 4-10: проигрыш рейтинга
- День 11+: бан на неделю
```

Примеры:
- League of Legends: система отчётов очень эффективна
- Valorant: система наказания строже, даже за один интоксикация может быть бан

### 2.3 Кооператив (Co-op): Вместе против врага

**Что такое кооперативная игра?**

Это режим, где реальные игроки работают вместе против компьютера, а не друг против друга.

#### 2.3.1 Характеристики кооператива

**Фокус на сотрудничестве**

В отличие от PvP, где целеь убить противника, в кооперативе целей — выжить вместе.

Примеры целей:
- Убить босса до того, как он убьёт вас
- Выжить 30 волн врагов
- Спасти NPC, заблокированных врагами
- Завершить миссию на сложности "Высокая"

**Враги становятся сильнее с количеством игроков**

Если враги одинаковые для 1 и 4 игроков, то:
- 1 игрок: боевик 1v1, сложно
- 4 игрока: все стреляют, враг умирает за 2 секунды, скучно

Решение: масштабирование врагов

```
1 игрок:
- Враги: 10 HP, 5 урона
- Волна: 5 врагов

2 игрока:
- Враги: 12 HP, 6 урона
- Волна: 6 врагов

3 игрока:
- Враги: 14 HP, 7 урона
- Волна: 7 врагов

4 игрока:
- Враги: 16 HP, 8 урона
- Волна: 8 врагов
```

Математика: HP врага = 10 + (количество_игроков - 1) * 2

**Разные роли**

В кооперативе разные игроки должны иметь разные роли:

Пример из Left 4 Dead:
- Полусводник (Medic - класс персонажа, специализирующийся на лечении и поддержке союзников): лечит команду
- Боец (Soldier - класс персонажа, специализирующийся на нанесении прямого урона врагам): наносит урон
- Техник (Engineer - класс персонажа, специализирующийся на установке ловушек и укреплений): чинит ловушки
- Маг (Mage - класс персонажа, использующий магию для ослабления врагов): дебаффит врагов

Почему?
- Если все полусводники, некем наносить урон
- Если все бойцы, некем лечить
- Каждый игрок имеет уникальную роль

**Требует координации**

Плохая координация = проигрыш.

Примеры:
- Если один игрок бежит вперёд один, его убьют
- Если все скучиваются в углу, областной эффект врага их уничтожит
- Если никто не объявляет тактику, ничего не будет скоординировано

Решение: встроенная система коммуникации
```
Голосовой чат: игроки могут говорить
Текстовый чат: если нет микрофона
Пингование: показать на карте что-то важное
Заранее записанные фразы: "Ко мне", "Нужна помощь", "Отступаем"
```

#### 2.3.2 Примеры кооперативных игр

**Left 4 Dead (4v zombies)**

Характеристики:
- 4 игрока в одной команде
- Враги: бесконечные орды зомби
- Волны: особые «танки» появляются периодически
- Режимы: Кампания, выживание, зараженные (4v4 асимметричное)

Почему это работает?
- Все 4 позиции равноценны (нельзя выиграть с 4 бойцами)
- Враги различны (обычные, танки, спецы)
- Каждая волна — новый вызов

Баланс:
- Врач имеет 20% HP, но лечит всех (низкий HP, высокое влияние)
- Боец имеет 30% HP, наносит 50% больше урона (середина)
- Техник имеет 35% HP, создаёт ловушки (поддержка)

**Deep Rock Galactic (4 игроки против инопланетян)**

Характеристики:
- 1-4 игрока исследуют пещеры
- враги: инопланетяне разных типов
- цель: добыть ресурсы, выжить
- классы: Бурильщик, Пулемётчик, Инженер, Сведения

Почему это работает?
- Каждый класс имеет уникальное снаряжение (бурильщик бурит стены, которые другие не могут)
- Враги требуют разные тактики
- Карта разнообразна (пещеры большие и маленькие)

**Divinity: Original Sin 2 (2-4 игрока в RPG)**

Характеристики:
- 2-4 игрока в глубокой RPG
- Каждый игрок управляет одним персонажем
- Враги: одиночные враги, не орды
- Особенность: диалоги между игроками (если они не согласны, может быть бой)

Почему это работает?
- Кооперативное повествование (история меняется, если есть несколько игроков)
- Боевая система требует координации
- Каждый может сделать всё, но вместе сильнее

#### 2.3.3 Типичные проблемы кооператива

**Проблема 1: Дисбаланс ролей**

Если роль Healer слишком слаба:
- Все выбирают Damage Dealer
- Никто не лечит
- Команда умирает

Решение:
- Роль Healer получает +30% урона (может защищать себя)
- Роль Healer получает бонус к награде (больше золота, больше опыта)

**Проблема 2: Неактивный игрок**

Если один игрок AFK (Away From Keyboard):
- Остальная команда в невыгодном положении
- Враги не масштабируются, как 3 игрока с одним AFK
- Выигрыш практически невозможен

Решение:
- Если игрок AFK 2+ минуты, враги становятся слабее
- Или команда может пропустить AFK игрока
- Или разрешить новому игроку присоединиться

**Проблема 3: Микротранзакции P2W (Pay to Win)**

Если один игрок может купить лучшее оружие:
- Он наносит 200% урона против других
- Остальные игроки чувствуют себя слабыми
- Игра кажется несправедливой

Решение:
- Все подарки только эстетичны (скины, спецэффекты)
- Механические преимущества нельзя купить
- Все игроки имеют равные шансы на успех независимо от трат